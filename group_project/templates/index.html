<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LCBO Project</title>

    <!-------------------------------------------- bootstrap--------------------------------------------------->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Oxygen" rel="stylesheet">




    <!-- -----------------------------------leaflet --------------------------------------------------------------------------- -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="" />

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>




    <!---------------------------------------------------- d3--------------------------------------------------------- -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

   <style> body,
    html {
        height: 100%;
        margin: 0;
        font-family: 'Oxygen', sans-serif;
        background-color: white;
    }

    #heading {
        background-image: url(https://images.pexels.com/photos/1862/summer-sunshine-alcohol-drink.jpg?w=1260&h=750&dpr=2&auto=compress&cs=tinysrgb);
        color: whitesmoke;
        image-rendering: crisp-edges;
        background-repeat: no-repeat;
        opacity: 0.7;
    }

    #showLocationsScreen {
        height: 100%;

    }

    #productPage {
        height: 100%;
    }

    #mapid {
        height: 75vh;

    }

    #mapPage {
        height: 50%;
    }


    #map {
        width: 100%;
        height: 400px;
        background-color: grey;
    }


    #myDiv {
        background-color: yellow;
    }

    #b_image {
        margin-left: 15px;
        width: 350px;
        background-image: url("beer.jpg");
    }

    .line {
        background: gold;
        position: relative;
        height: 8px;
    }</style>
</head>

<body>

    <div id="heading" class="jumbotron jumbotron-fluid" style="text-align:center; height:50%;">


        <h1>Find Your Local Beer Store in Ontario</h1>

        <div class="container">
            <h3>This search uses location data supplied by the Liquor Control Board of Ontario (LCBO) plus user-input postal
                codes to return the nearest LCBO retailer. </h3>
        </div>
    </div>

    <div class="line" style="background :NavajoWhite; position:relative; height:8px"></div>
    <hr>

    <div class="container text-center">
        <div class="row">
            <div class="col-sm-4">
                <img src="http://www.lcbo.com/content/lcbo/en/pages/beer/486-craft-beers-on-the-wall/_jcr_content/hero-content/enhanced_product_her.img.jpg/1515771376964.jpg"
                    class="img-responsive" style="width:100%" alt="Image">
            </div>
            <div class="col-sm-4" style="width:350px;height:auto; margin-left: 20px; margin-right: 20px; background-color:NavajoWhite; border:gold solid 1px;">
                <h4>
                    <b>Enter Your Postal & Country Codes</b>
                </h4>
                <ul>
                    <form method="POST" action="/send" role="form" , name="petform">
                        <div class="col-sm-8 form-group">

                            <label for="inputName" style="margin-top:12px">
                                <b>Country Code:</b>
                            </label>
                            <input type="text" id="inputName" name="country" placeholder="Country Code">
                            <br>

                            <label for="inputName">Postal Code: </label>
                            <input type="text" id="inputName" name="zipcode" placeholder="Postal Code">
                        </div>
                        <input type="submit" style="margin-top:70px" value="Submit" class="btn btn-info btn-lg">
                    </form>
                </ul>
            </div>
            <div class="col-sm-4">
                <img src="http://www.lcbo.com/content/lcbo/en/pages/beer/214-lagers-on-the-wall/_jcr_content/hero-content/enhanced_product_her.img.jpg/1513271593463.jpg"
                    class="img-responsive" style="width:100%" alt="Image">
            </div>
        </div>
    </div>
    <hr>
    <div class="line" style="background :NavajoWhite; position:relative; height:8px"></div>
    <div class="height" style="height:20px"></div>
    <div id="showLocationsScreen">
        <!-- heigh div -->
        <div class="height" style="height:10px"></div>
        <div class="container text-center">
            <h1>
                <u> Nearest Locations</u>
            </h1>
            <div class="rows">
                <div class="col-md-3" style="border:lightgray solid 2px; margin:40px;height:350px">
                    <h2>
                        <u> Location</u>
                    </h2>
                    <p id="nameOne"></p>
                    <p id="storeIDOne"></p>
                    <p id="addressOne"></p>
                    <p id="cityOne"></p>

                    <p>Province: Ontario</p>
                    <p>Country: Canada</p>

                    <p id="phoneOne"></p>
                    <p id="distanceOne"></p>
                </div>
                <div class="col-md-3" style="border:lightgray solid 2px; margin:40px;height:350px">
                    <h2>
                        <u> Location</u>
                    </h2>
                    <p id="nameTwo"></p>
                    <p id="storeIDTwo"></p>
                    <p id="addressTwo"></p>
                    <p id="cityTwo"></p>
                    <p>Province: Ontario</p>
                    <p>Country: Canada</p>
                    <p id="phoneTwo"></p>
                    <p id="distanceTwo"></p>
                </div>
                <div class="col-md-3" style="border:lightgray solid 2px; margin:40px;height:350px">
                    <h2>
                        <u> Location</u>
                    </h2>
                    <p id="nameThree"></p>
                    <p id="storeIDThree"></p>
                    <p id="addressThree"></p>
                    <p id="cityThree"></p>
                    <p>Province: Ontario</p>
                    <p>Country: Canada</p>
                    <p id="phoneThree"></p>
                    <p id="distanceThree"></p>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row content">

                    <div class="col-sm-3 sidenav">
                        <h1>Map Results</h1>
                        <hr>
                        <h3>This map displays the top three closest stores to your requested postal code. Take a look to get
                            yourself there faster. Cheers!</h3>
                    </div>
                    <div class="col-sm-9">
                        <div id="mapid"></div>
                    </div>
                </div>
            </div>
        </div>


        <!-- total height on page two -->
        <div class="height" style="height:40px"></div>

        <div id="productPage">
            <div class="container text-center" style="border:2px solid lightgray;">
                <h1>
                    <u> Beer Cold Room Report</u>
                </h1>
                <div class="rows">
                    <div class="col-md-12">
                        <h4>The Liquor Control Board of Ontario maintains detailed records on store attributes, including the
                            existence of special occasion permits, handicap access, vintages corner, product consultant bilingual
                            services, parking, and more.</h4>
                        <h4>This graph visualizes one such characteristic: whether the retail location features a beer cold room.
                            If already chilled beer is what you seek, you’ll be pleased to learn a majority of Ontario’s
                            retailers offer such service. The below graph visualizes the proportion of stores with and without
                            chill rooms. It turns out Ontario’s snows aren’t quite enough to keep beers cold!</h4>

                        <br>

                        <div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
                        <div class="height" style="height:50px"></div>
                    </div>

                </div>
            </div>
        </div>


        <div id="productPage">
            <div class="container">
                <h1>
                    <strong>-Our Crafty Picks-</strong>
                </h1>
                <br>
                <div class="container">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Goose Island Honkers Ale</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/449249.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 449249 | 473 mL can</div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Cowbell Kelly's Contraption</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/526814.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 526814 | 473 mL can</div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Bench Brewing Ball's Falls Session IPA</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/481515.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 481515 | 473 mL can</div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>


                <div class="container">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Bench Brewing Twenty Mile Farmhouse Ale</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/508515.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 508515 | 473 mL can</div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Big Rig Midnight Kissed My Cow</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/474072.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 474072 | 473 mL can</div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="panel panel-info">
                                <div class="panel-heading">Monty's Aged Ryed Ale</div>
                                <div class="panel-body">
                                    <img src="http://www.lcbo.com/content/dam/lcbo/products/498691.jpg/jcr:content/renditions/cq5dam.thumbnail.319.319.png" class="img-responsive"
                                        style="width:100%; height:360px;" alt="Image">
                                </div>
                                <div class="panel-footer">—LCBO# 498691 | 473 mL can</div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <br>
            </div>
        </div>
        <!---------------------------------------------------- js --------------------------------------------------------- -->
        <script>d3.json('/data/location', function (data) {
            var data = data;
            // console.log(data[0]['locations']['LocationOne'])
            var distance_One = data[0]['locations']['LocationOne']['distance_in_meters'][0]
            var address_One = data[0]['locations']['LocationOne']['address'][0]
            var city_One = data[0]['locations']['LocationOne']['city'][0]
            var name_One = data[0]['locations']['LocationOne']['name'][0]
            var storeID_One = data[0]['locations']['LocationOne']['store_no'][0]
            var phone_One = data[0]['locations']['LocationOne']['phone'][0]
            var lat_One = data[0]['locations']['LocationOne']['lat'][0]
            var lon_One = data[0]['locations']['LocationOne']['lon'][0]
        
            // console.log(1, lat_One)
            // console.log(1, lon_One)
        
        
            document.getElementById('nameOne').innerHTML = "Store Name:" + " " + String(name_One);
            document.getElementById('cityOne').innerHTML = "City:" + " " + String(city_One);
            document.getElementById('storeIDOne').innerHTML = "Store Number:" + " " + String(storeID_One);
            document.getElementById('cityOne').innerHTML = "City:" + " " + String(city_One);
            document.getElementById('addressOne').innerHTML = "Address:" + " " + String(address_One);
            document.getElementById('distanceOne').innerHTML = "Distance:" + " " + String(Math.round(
                    distance_One / 1609)) + " " +
                "mi away";
            document.getElementById('phoneOne').innerHTML = "Phone:" + " " + String(phone_One);
        
        
        
            var distance_Two = data[0]['locations']['LocationTwo']['distance_in_meters'][0]
            var address_Two = data[0]['locations']['LocationTwo']['address'][0]
            var city_Two = data[0]['locations']['LocationTwo']['city'][0]
            var name_Two = data[0]['locations']['LocationTwo']['name'][0]
            var storeID_Two = data[0]['locations']['LocationTwo']['store_no'][0]
            var phone_Two = data[0]['locations']['LocationTwo']['phone'][0]
            var lat_Two = data[0]['locations']['LocationTwo']['lat'][0]
            var lon_Two = data[0]['locations']['LocationTwo']['lon'][0]
        
            // console.log(2, lat_Two)
            // console.log(2, lon_Two)
        
        
            document.getElementById('nameTwo').innerHTML = "Store Name:" + " " + String(name_Two);
            document.getElementById('cityTwo').innerHTML = "City:" + " " + String(city_Two);
            document.getElementById('storeIDTwo').innerHTML = "Store Number:" + " " + String(storeID_Two);
            document.getElementById('cityTwo').innerHTML = "City:" + " " + String(city_Two);
            document.getElementById('addressTwo').innerHTML = "Address:" + " " + String(address_Two);
            document.getElementById('distanceTwo').innerHTML = "Distance:" + " " + String(Math.round(
                distance_Two / 1609)) + " " + "mi away";
            document.getElementById('phoneTwo').innerHTML = "Phone:" + " " + String(phone_Two);
        
        
            var distance_Three = data[0]['locations']['LocationThree']['distance_in_meters'][0]
            var address_Three = data[0]['locations']['LocationThree']['address'][0]
            var city_Three = data[0]['locations']['LocationThree']['city'][0]
            var name_Three = data[0]['locations']['LocationThree']['name'][0]
            var storeID_Three = data[0]['locations']['LocationThree']['store_no'][0]
            var phone_Three = data[0]['locations']['LocationThree']['phone'][0]
            var lat_Three = data[0]['locations']['LocationThree']['lat'][0]
            var lon_Three = data[0]['locations']['LocationThree']['lon'][0]
        
            // console.log(3, lat_Two)
            // console.log(3, lon_Two)
        
        
            document.getElementById('nameThree').innerHTML = "Store Name:" + " " + String(name_Three);
            document.getElementById('cityThree').innerHTML = "City:" + " " + String(city_Three);
            document.getElementById('storeIDThree').innerHTML = "Store Number:" + " " + String(
                storeID_Three);
            document.getElementById('cityThree').innerHTML = "City:" + " " + String(city_Three);
            document.getElementById('addressThree').innerHTML = "Address:" + " " + String(address_Three);
            document.getElementById('distanceThree').innerHTML = "Distance:" + " " + String(Math.round(
                distance_Three / 1609)) + " " + "mi away";
            document.getElementById('phoneThree').innerHTML = "Phone:" + " " + String(phone_Three);
        
        
        
        
            // map using leaflet
        
            // Creating map object
            var myMap = L.map("mapid", {
                center: [lat_One, lon_One],
                zoom: 10
            });
            // Adding tile layer
            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox.streets-satellite',
                accessToken: 'pk.eyJ1IjoiYmx0eHI5IiwiYSI6ImNqZGhqeXhtOTB6ZDAzMm8xamo5cHRmb3cifQ.lUfEpXhv5BlcfZ2c2gVLtQ'
            }).addTo(myMap);
        
        
            var location_one = L.marker([lat_One, lon_One]).addTo(myMap),
                location_two = L.marker([lat_Two, lon_Two]).addTo(myMap),
                location_three = L.marker([lat_Three, lon_Three]).addTo(myMap);
        
        
            location_one.bindPopup("<b>Store Name: " + String(name_One) + "</b><br>" + "Distance:" + " " +
                    String(Math.round(
                        distance_One / 1609)) + " " + "mi away"),
        
                location_two.bindPopup("<b>Store Name: " + String(name_Two) + "</b><br>" + "Distance:" +
                    " " +
                    String(Math.round(
                        distance_Two / 1609)) + " " + "mi away"),
        
                location_three.bindPopup("<b>Store Name: " + String(name_Three) + "</b><br>" + "Distance:" +
                    " " + String(Math.round(
                        distance_Three / 1609)) + " " + "mi away");
        
        
        
        });
        
        
        d3.json('/data/stores/beerROOM', function (dataBeerRoom) {
        
        
            // var data = [{
            //     values: [19, 26, 55],
            //     labels: ['Residential', 'Non-Residential', 'Utility'],
            //     type: 'pie'
            // }];
        
            // Plotly.newPlot('myDiv', data);
        
            var dataBeerRoom = dataBeerRoom
        
        
        
            Highcharts.chart('container', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie'
                },
                title: {
                    text: 'Has Beer Room: True or False'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) ||
                                    'black'
                            }
                        }
                    }
                },
                series: [{
                    name: 'True',
                    colorByPoint: true,
                    data: [{
                        name: 'True',
                        y: 412
                    }, {
                        name: 'False',
                        y: 248,
        
                    }]
                }]
            });
        
        
        
        
        
        
        
        
        
        });
        
        
        
        
        //              console.log(storeINFO)
        
        // function initMap() {
        //  var uluru = {
        //      lat: -25.363,
        //      lng: 131.044
        //  }
        //  var map = new google.maps.Map(document.getElementById('map'), {
        //      zoom: 4,
        //      center: uluru
        //  });
        //  var marker = new google.maps.Marker({
        //      position: uluru,
        //      map: map
        //  });
        // }</script>

</body>

</html>